"use strict";var VLS_GF=VLS_GF||{};VLS_GF.TourModule=function(e){function t(){v=!0,e("body").on("wheel.vls-gf mousewheel.vls-gf touchmove.vls-gf",function(e){return!1}),g=i(),f=g.find(".vls-gf-tour-focus"),c.append(g),g.find("#vls-gf-tour-btn-close").on("click.vls-gf",l),g.find("#vls-gf-tour-btn-next").on("click.vls-gf",a),n()}function l(){v=!1,g.remove(),e("body").off("wheel.vls-gf mousewheel.vls-gf touchmove.vls-gf"),e.post(ajaxurl,{action:"vls_gf_disable_tour"}),VLS_GF.NavigationPanelModule.loadGalleryTree(),e(".vls-gf-fixed-items .vls-gf-unsorted a").trigger("click")}function a(){d||(u++,g.find(".vls-gf-tour-progress span").eq(u).addClass("done"),g.find(".vls-gf-tour-message").remove(),h[u]())}function n(){var t=e('<div class="vls-gf-tour-welcome-message">');t.append("<h1>Welcome to the Gallery Factory quick tour!</h1>"),t.append('<p>This tour will guide you through the basic plugin features.<br>To proceed to the next step press "Next" button at the bottom of the screen.</p>'),g.append(t),t.css({top:Math.floor(g.height()/2)-Math.floor(t.height()/2)-100+"px",left:Math.floor(g.width()/2)-Math.floor(t.width()/2)+"px"})}function o(){g.find("#vls-gf-tour-btn-close").remove(),g.find("#vls-gf-tour-btn-next").text("Done").off().on("click.vls-gf",l),u=-1}function i(){for(var t=e('<div id="vls-gf-tour-backdrop"><div class="vls-gf-tour-focus"></div><div class="vls-gf-tour-controls"><div class="vls-gf-tour-progress"></div><button id="vls-gf-tour-btn-close">Skip the tour</button><button id="vls-gf-tour-btn-next">next</button></div></div>'),l=t.find(".vls-gf-tour-progress"),a=1;a<=h.length;a++)l.append('<span class="vls-gf-tour-step-'+a+'">');return t}function s(t,l,a,n,o){var i=e(t),s=i.offset().left,r=i.offset().top,g=i.outerWidth(),v=i.outerHeight();f.css({left:s-o+"px",top:r-l+"px",width:g+o+a+"px",height:v+l+n+"px"})}function r(t,l,a,n,o){var i=e(t),s=e('<div class="vls-gf-tour-message"></div>').text(n);if("l"===l?s.addClass("vls-gf-tour-message-left"):"r"===l&&s.addClass("vls-gf-tour-message-right"),s.css("width",a+"px"),g.append(s),o>0)var r=i.offset().top+o;else var r=i.offset().top+Math.ceil(i.outerHeight()/2)-Math.ceil(s.outerHeight()/2);var f=0;"l"===l?f=i.offset().left-a-40:"r"===l&&(f=i.offset().left+i.outerWidth()+40),s.css({top:r+"px",left:f+"px"})}var g,f,v=!1,u=-1,c=e("#wpwrap"),d=!1,h=[function(){g.find(".vls-gf-tour-welcome-message").remove();var e="This is the Navigation Panel. Here you can navigate your image collection and manage albums";r(".vls-gf-gallery-manager-container .vls-gf-navigation-panel","r",210,e),s(".vls-gf-gallery-manager-container .vls-gf-navigation-panel",0,0,0,0)},function(){var t="Expand the folder's contents by clicking on the folder.";r(".vls-gf-gallery-manager-container .vls-gf-navigation-panel","r",200,t),d=!0,setTimeout(function(){e("#vls-gf-gallery-tree .vls-gf-folder.level-1:eq(0)").trigger("click"),setTimeout(function(){e("#vls-gf-gallery-tree .vls-gf-folder.level-2:eq(1)").trigger("click"),setTimeout(function(){s("#vls-gf-gallery-tree",56,0,0,0),d=!1},500)},500)},1500)},function(){var e="Add, sort, move, rename or delete folders and albums by activating edit mode.";r("#vls-gf-btn-edit-gallery-tree","r",200,e),s("#vls-gf-btn-edit-gallery-tree",4,4,4,4)},function(){e("#vls-gf-btn-edit-gallery-tree").trigger("click"),setTimeout(function(){var e="Sort folders and albums and move them between folders by simply dragging them to the desired position.";r("#vls-gf-gallery-tree","r",200,e),s("#vls-gf-gallery-tree",0,0,0,0)},100)},function(){var e="Add a folder or an album by clicking these buttons";r("#vls-gf-btn-add-new-folder","r",210,e,0),s("#vls-gf-btn-add-new-folder",0,0,26,0)},function(){var e="To rename a folder or an album click pencil icon.";r("#vls-gf-gallery-tree","r",200,e),s("#vls-gf-gallery-tree",0,-29,0,-195)},function(){var e="To delete a folder or an album click trash bin icon.";r("#vls-gf-gallery-tree","r",200,e),s("#vls-gf-gallery-tree",0,0,0,-214)},function(){var e='All changes made in edit mode are applied to the database only on saving changes. Clicking "Cancel" button will discard changes and bring the panel back to the navigation mode.';r("#vls-gf-btn-gallery-tree-cancel","r",200,e),s("#vls-gf-btn-gallery-tree-cancel",0,0,0,114)},function(){d=!0,s("#vls-gf-gallery-tree",0,0,0,0),e("#vls-gf-btn-gallery-tree-cancel").trigger("click"),setTimeout(function(){e("#vls-gf-gallery-tree .vls-gf-folder.level-1:eq(0)").trigger("click"),setTimeout(function(){e("#vls-gf-gallery-tree .vls-gf-folder.level-2:eq(1)").trigger("click"),setTimeout(function(){e("#vls-gf-gallery-tree .vls-gf-album.level-3:eq(0)").trigger("click"),setTimeout(function(){var e="This is the Main Panel. It displays the currently activated album and provides access to all album-related features.";r(".vls-gf-right-panel","l",200,e,100),s(".vls-gf-right-panel",0,0,0,0),d=!1},1e3)},600)},600)},600)},function(){var e="There are three tabs available. Overview tab opens by default when you switch the active album.";r("#vls-gf-tab-panel","l",200,e),s("#vls-gf-tab-panel",0,0,0,0)},function(){var e="Overview tab shows all album's images. Here you can upload and delete images, move them between albums and edit image's details.";r(".vls-gf-right-panel .vls-gf-tab-view","l",200,e,100),s(".vls-gf-right-panel .vls-gf-tab-view",0,0,0,0)},function(){var e='Click on a thumbnail to open the image details editing dialog. Drag thumbnail to the album in the Albums Panel to move it to another album or to the "Unsorted images" folder.';r(".vls-gf-right-panel .vls-gf-image-panel li:eq(0)","r",200,e),s(".vls-gf-right-panel .vls-gf-image-panel li:eq(0)",0,0,0,0)},function(){var e="Upload images to the active album";r("#vls-gf-upload-image-button:parent","r",200,e),s("#vls-gf-upload-image-button:parent",0,0,0,0)},function(){var e="Activate bulk select mode to enable selecting multiple images and moving or deleting them at once.";r("#vls-gf-bulk-select-start-button:parent","l",200,e),s("#vls-gf-bulk-select-start-button:parent",0,0,0,0)},function(){var e="Click this tab to switch to the layout editor for the current album.";r("#vls-gf-tab-panel li:eq(1)","l",200,e),s("#vls-gf-tab-panel li:eq(1)",0,0,0,0)},function(){d=!0,e("#vls-gf-tab-panel li:eq(1) a").trigger("click"),setTimeout(function(){var e="Layout tab contains WYSIWYG layout editor for the currently selected album.";r(".vls-gf-right-panel .vls-gf-tab-view","l",200,e,100),s(".vls-gf-right-panel .vls-gf-tab-view",0,0,0,0),d=!1},1500)},function(){var e="Here you can set the layout options. The layout view is updated immediately on the change so you can see the result.";r(".vls-gf-tab-view .vls-gf-tab-container-side","l",200,e),s(".vls-gf-tab-view .vls-gf-tab-container-side",6,6,6,6)},function(){var e="You can move every thumbnail to the desired position by dragging the thumbnail. If layout type 'Metro' is selected, you can also freely change the size of the thumbnail by dragging the resize helpers at the thumbnails' edges";r(".vls-gf-tab-view .vls-gf-tab-container-layout","l",200,e,100),s(".vls-gf-tab-view .vls-gf-tab-container-layout",10,10,10,10)},function(){var e="To switch to the album details click this tab.";r("#vls-gf-tab-panel li:eq(2)","l",200,e),s("#vls-gf-tab-panel li:eq(2)",0,0,0,0)},function(){d=!0,e("#vls-gf-tab-panel li:eq(2) a").trigger("click"),setTimeout(function(){var e='Edit tab contains albums details and album-related settings. To save your changes click "Update" button in the top-right corner.';r(".vls-gf-right-panel .vls-gf-tab-view","l",200,e,100),s(".vls-gf-right-panel .vls-gf-tab-view",0,0,0,0),d=!1},1500)},function(){var e="To insert an album to your post or page use the displayed shortcode. You can also use the Gallery Factory button in TinyMCE editor to insert a shortcode.";r(".vls-gf-right-panel .vls-gf-shortcode","l",280,e),s(".vls-gf-right-panel .vls-gf-shortcode",6,6,6,6),o()}];return{isActive:function(){return v},start:t}}(jQuery);